"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3371],{87357:function($r,z,n){n.d(z,{Z:function(){return E}});var _=n(87462),Z=n(63366),X=n(67294),J=n(86010),Q=n(49731),y=n(86523),rr=n(39707),x=n(96682),nr=n(85893);const O=["className","component"];function lr(cr={}){const{themeId:B,defaultTheme:ur,defaultClassName:A="MuiBox-root",generateClassName:Y}=cr,tr=(0,Q.ZP)("div",{shouldForwardProp:T=>T!=="theme"&&T!=="sx"&&T!=="as"})(y.Z);return X.forwardRef(function(k,vr){const M=(0,x.Z)(ur),mr=(0,rr.Z)(k),{className:G,component:m="div"}=mr,pr=(0,Z.Z)(mr,O);return(0,nr.jsx)(tr,(0,_.Z)({as:m,ref:vr,className:(0,J.Z)(G,Y?Y(A):A),theme:B&&M[B]||M},pr))})}var W=n(37078),j=n(43619),dr=n(10606);const N=(0,j.Z)();var E=lr({themeId:dr.Z,defaultTheme:N,defaultClassName:"MuiBox-root",generateClassName:W.Z.generate})},81458:function($r,z,n){n.d(z,{Z:function(){return Dr}});var _=n(63366),Z=n(87462),X=n(67294),J=n(86010),Q=n(94780),y=n(70917),rr=n(41796),x=n(98216),nr=n(2734),O=n(90948),lr=n(71657),W=n(1588),j=n(34867);function dr(e){return(0,j.Z)("MuiLinearProgress",e)}const N=(0,W.Z)("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);var jr=null,E=n(85893);const cr=["className","color","value","valueBuffer","variant"];let B=e=>e,ur,A,Y,tr,fr,T;const k=4,vr=(0,y.F4)(ur||(ur=B`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),M=(0,y.F4)(A||(A=B`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),mr=(0,y.F4)(Y||(Y=B`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),G=e=>{const{classes:i,variant:c,color:I}=e,gr={root:["root",`color${(0,x.Z)(I)}`,c],dashed:["dashed",`dashedColor${(0,x.Z)(I)}`],bar1:["bar",`barColor${(0,x.Z)(I)}`,(c==="indeterminate"||c==="query")&&"bar1Indeterminate",c==="determinate"&&"bar1Determinate",c==="buffer"&&"bar1Buffer"],bar2:["bar",c!=="buffer"&&`barColor${(0,x.Z)(I)}`,c==="buffer"&&`color${(0,x.Z)(I)}`,(c==="indeterminate"||c==="query")&&"bar2Indeterminate",c==="buffer"&&"bar2Buffer"]};return(0,Q.Z)(gr,dr,i)},m=(e,i)=>i==="inherit"?"currentColor":e.vars?e.vars.palette.LinearProgress[`${i}Bg`]:e.palette.mode==="light"?(0,rr.$n)(e.palette[i].main,.62):(0,rr._j)(e.palette[i].main,.5),pr=(0,O.ZP)("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,i)=>{const{ownerState:c}=e;return[i.root,i[`color${(0,x.Z)(c.color)}`],i[c.variant]]}})(({ownerState:e,theme:i})=>(0,Z.Z)({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:m(i,e.color)},e.color==="inherit"&&e.variant!=="buffer"&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},e.variant==="buffer"&&{backgroundColor:"transparent"},e.variant==="query"&&{transform:"rotate(180deg)"})),K=(0,O.ZP)("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,i)=>{const{ownerState:c}=e;return[i.dashed,i[`dashedColor${(0,x.Z)(c.color)}`]]}})(({ownerState:e,theme:i})=>{const c=m(i,e.color);return(0,Z.Z)({position:"absolute",marginTop:0,height:"100%",width:"100%"},e.color==="inherit"&&{opacity:.3},{backgroundImage:`radial-gradient(${c} 0%, ${c} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})},(0,y.iv)(tr||(tr=B`
    animation: ${0} 3s infinite linear;
  `),mr)),Br=(0,O.ZP)("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,i)=>{const{ownerState:c}=e;return[i.bar,i[`barColor${(0,x.Z)(c.color)}`],(c.variant==="indeterminate"||c.variant==="query")&&i.bar1Indeterminate,c.variant==="determinate"&&i.bar1Determinate,c.variant==="buffer"&&i.bar1Buffer]}})(({ownerState:e,theme:i})=>(0,Z.Z)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:e.color==="inherit"?"currentColor":(i.vars||i).palette[e.color].main},e.variant==="determinate"&&{transition:`transform .${k}s linear`},e.variant==="buffer"&&{zIndex:1,transition:`transform .${k}s linear`}),({ownerState:e})=>(e.variant==="indeterminate"||e.variant==="query")&&(0,y.iv)(fr||(fr=B`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),vr)),Mr=(0,O.ZP)("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,i)=>{const{ownerState:c}=e;return[i.bar,i[`barColor${(0,x.Z)(c.color)}`],(c.variant==="indeterminate"||c.variant==="query")&&i.bar2Indeterminate,c.variant==="buffer"&&i.bar2Buffer]}})(({ownerState:e,theme:i})=>(0,Z.Z)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},e.variant!=="buffer"&&{backgroundColor:e.color==="inherit"?"currentColor":(i.vars||i).palette[e.color].main},e.color==="inherit"&&{opacity:.3},e.variant==="buffer"&&{backgroundColor:m(i,e.color),transition:`transform .${k}s linear`}),({ownerState:e})=>(e.variant==="indeterminate"||e.variant==="query")&&(0,y.iv)(T||(T=B`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),M));var Dr=X.forwardRef(function(i,c){const I=(0,lr.Z)({props:i,name:"MuiLinearProgress"}),{className:gr,color:Tr="primary",value:or,valueBuffer:hr,variant:L="indeterminate"}=I,xr=(0,_.Z)(I,cr),w=(0,Z.Z)({},I,{color:Tr,variant:L}),er=G(w),Cr=(0,nr.Z)(),ar={},ir={bar1:{},bar2:{}};if((L==="determinate"||L==="buffer")&&or!==void 0){ar["aria-valuenow"]=Math.round(or),ar["aria-valuemin"]=0,ar["aria-valuemax"]=100;let R=or-100;Cr.direction==="rtl"&&(R=-R),ir.bar1.transform=`translateX(${R}%)`}if(L==="buffer"&&hr!==void 0){let R=(hr||0)-100;Cr.direction==="rtl"&&(R=-R),ir.bar2.transform=`translateX(${R}%)`}return(0,E.jsxs)(pr,(0,Z.Z)({className:(0,J.Z)(er.root,gr),ownerState:w,role:"progressbar"},ar,{ref:c},xr,{children:[L==="buffer"?(0,E.jsx)(K,{className:er.dashed,ownerState:w}):null,(0,E.jsx)(Br,{className:er.bar1,ownerState:w,style:ir.bar1}),L==="determinate"?null:(0,E.jsx)(Mr,{className:er.bar2,ownerState:w,style:ir.bar2})]}))})},2734:function($r,z,n){n.d(z,{Z:function(){return Q}});var _=n(67294),Z=n(96682),X=n(90247),J=n(10606);function Q(){const y=(0,Z.Z)(X.Z);return y[J.Z]||y}},77230:function($r,z,n){n.r(z),n.d(z,{default:function(){return Fr}});var _=n(5574),Z=n.n(_),X=n(13769),J=n.n(X),Q=n(97857),y=n.n(Q),rr=n(58291),x=n(88513),nr=n(90948),O=n(90629),lr=n(63366),W=n(87462),j=n(67294),dr=n(86010),N=n(95408),jr=n(39707),E=n(94780),cr=n(71657),B=n(2734),A=j.createContext(),Y=n(1588),tr=n(34867);function fr(r){return(0,tr.Z)("MuiGrid",r)}const T=[0,1,2,3,4,5,6,7,8,9,10],k=["column-reverse","column","row-reverse","row"],vr=["nowrap","wrap-reverse","wrap"],M=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12];var G=(0,Y.Z)("MuiGrid",["root","container","item","zeroMinWidth",...T.map(r=>`spacing-xs-${r}`),...k.map(r=>`direction-xs-${r}`),...vr.map(r=>`wrap-xs-${r}`),...M.map(r=>`grid-xs-${r}`),...M.map(r=>`grid-sm-${r}`),...M.map(r=>`grid-md-${r}`),...M.map(r=>`grid-lg-${r}`),...M.map(r=>`grid-xl-${r}`)]),m=n(85893);const pr=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function K(r){const o=parseFloat(r);return`${o}${String(r).replace(String(o),"")||"px"}`}function Br({theme:r,ownerState:o}){let a;return r.breakpoints.keys.reduce((t,s)=>{let d={};if(o[s]&&(a=o[s]),!a)return t;if(a===!0)d={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(a==="auto")d={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const g=(0,N.P$)({values:o.columns,breakpoints:r.breakpoints.values}),h=typeof g=="object"?g[s]:g;if(h==null)return t;const C=`${Math.round(a/h*1e8)/1e6}%`;let u={};if(o.container&&o.item&&o.columnSpacing!==0){const p=r.spacing(o.columnSpacing);if(p!=="0px"){const f=`calc(${C} + ${K(p)})`;u={flexBasis:f,maxWidth:f}}}d=(0,W.Z)({flexBasis:C,flexGrow:0,maxWidth:C},u)}return r.breakpoints.values[s]===0?Object.assign(t,d):t[r.breakpoints.up(s)]=d,t},{})}function Mr({theme:r,ownerState:o}){const a=(0,N.P$)({values:o.direction,breakpoints:r.breakpoints.values});return(0,N.k9)({theme:r},a,t=>{const s={flexDirection:t};return t.indexOf("column")===0&&(s[`& > .${G.item}`]={maxWidth:"none"}),s})}function Ir({breakpoints:r,values:o}){let a="";Object.keys(o).forEach(s=>{a===""&&o[s]!==0&&(a=s)});const t=Object.keys(r).sort((s,d)=>r[s]-r[d]);return t.slice(0,t.indexOf(a))}function Dr({theme:r,ownerState:o}){const{container:a,rowSpacing:t}=o;let s={};if(a&&t!==0){const d=(0,N.P$)({values:t,breakpoints:r.breakpoints.values});let g;typeof d=="object"&&(g=Ir({breakpoints:r.breakpoints.values,values:d})),s=(0,N.k9)({theme:r},d,(h,C)=>{var u;const p=r.spacing(h);return p!=="0px"?{marginTop:`-${K(p)}`,[`& > .${G.item}`]:{paddingTop:K(p)}}:(u=g)!=null&&u.includes(C)?{}:{marginTop:0,[`& > .${G.item}`]:{paddingTop:0}}})}return s}function e({theme:r,ownerState:o}){const{container:a,columnSpacing:t}=o;let s={};if(a&&t!==0){const d=(0,N.P$)({values:t,breakpoints:r.breakpoints.values});let g;typeof d=="object"&&(g=Ir({breakpoints:r.breakpoints.values,values:d})),s=(0,N.k9)({theme:r},d,(h,C)=>{var u;const p=r.spacing(h);return p!=="0px"?{width:`calc(100% + ${K(p)})`,marginLeft:`-${K(p)}`,[`& > .${G.item}`]:{paddingLeft:K(p)}}:(u=g)!=null&&u.includes(C)?{}:{width:"100%",marginLeft:0,[`& > .${G.item}`]:{paddingLeft:0}}})}return s}function i(r,o,a={}){if(!r||r<=0)return[];if(typeof r=="string"&&!Number.isNaN(Number(r))||typeof r=="number")return[a[`spacing-xs-${String(r)}`]];const t=[];return o.forEach(s=>{const d=r[s];Number(d)>0&&t.push(a[`spacing-${s}-${String(d)}`])}),t}const c=(0,nr.ZP)("div",{name:"MuiGrid",slot:"Root",overridesResolver:(r,o)=>{const{ownerState:a}=r,{container:t,direction:s,item:d,spacing:g,wrap:h,zeroMinWidth:C,breakpoints:u}=a;let p=[];t&&(p=i(g,u,o));const f=[];return u.forEach($=>{const P=a[$];P&&f.push(o[`grid-${$}-${String(P)}`])}),[o.root,t&&o.container,d&&o.item,C&&o.zeroMinWidth,...p,s!=="row"&&o[`direction-xs-${String(s)}`],h!=="wrap"&&o[`wrap-xs-${String(h)}`],...f]}})(({ownerState:r})=>(0,W.Z)({boxSizing:"border-box"},r.container&&{display:"flex",flexWrap:"wrap",width:"100%"},r.item&&{margin:0},r.zeroMinWidth&&{minWidth:0},r.wrap!=="wrap"&&{flexWrap:r.wrap}),Mr,Dr,e,Br);function I(r,o){if(!r||r<=0)return[];if(typeof r=="string"&&!Number.isNaN(Number(r))||typeof r=="number")return[`spacing-xs-${String(r)}`];const a=[];return o.forEach(t=>{const s=r[t];if(Number(s)>0){const d=`spacing-${t}-${String(s)}`;a.push(d)}}),a}const gr=r=>{const{classes:o,container:a,direction:t,item:s,spacing:d,wrap:g,zeroMinWidth:h,breakpoints:C}=r;let u=[];a&&(u=I(d,C));const p=[];C.forEach($=>{const P=r[$];P&&p.push(`grid-${$}-${String(P)}`)});const f={root:["root",a&&"container",s&&"item",h&&"zeroMinWidth",...u,t!=="row"&&`direction-xs-${String(t)}`,g!=="wrap"&&`wrap-xs-${String(g)}`,...p]};return(0,E.Z)(f,fr,o)};var or=j.forwardRef(function(o,a){const t=(0,cr.Z)({props:o,name:"MuiGrid"}),{breakpoints:s}=(0,B.Z)(),d=(0,jr.Z)(t),{className:g,columns:h,columnSpacing:C,component:u="div",container:p=!1,direction:f="row",item:$=!1,rowSpacing:P,spacing:l=0,wrap:S="wrap",zeroMinWidth:b=!1}=d,V=(0,lr.Z)(d,pr),sr=P||l,br=C||l,F=j.useContext(A),yr=p?h||12:F,Zr={},Pr=(0,W.Z)({},V);s.keys.forEach(D=>{V[D]!=null&&(Zr[D]=V[D],delete Pr[D])});const Sr=(0,W.Z)({},d,{columns:yr,container:p,direction:f,item:$,rowSpacing:sr,columnSpacing:br,wrap:S,zeroMinWidth:b,spacing:l},Zr,{breakpoints:s.keys}),Lr=gr(Sr);return(0,m.jsx)(A.Provider,{value:yr,children:(0,m.jsx)(c,(0,W.Z)({ownerState:Sr,className:(0,dr.Z)(Lr.root,g),as:u,ref:a},Pr))})}),hr=n(51233),L=n(87357),xr=n(69661),w=n(81458),er=n(15861),Cr=n(7145),ar=n.n(Cr),ir=n(98958),R=n(98169),Gr=n(63679),zr=n(36963),Or=n(9628),Er=["item","script","moveCard","findCard","data"],Ar=(0,nr.ZP)(O.Z)(function(r){var o=r.theme;return y()(y()({},o.typography.body2),{},{textAlign:"center",color:o.palette.text.secondary,overflow:"hidden",background:"unset",boxShadow:"unset",borderRadius:0})}),U={},Nr={},Kr=function(o){var a,t=o.item,s=o.script,d=o.moveCard,g=o.findCard,h=o.data,C=J()(o,Er),u="".concat(t==null?void 0:t.id,"_").concat(t==null?void 0:t.author),p=(0,x.useModel)("@@initialState"),f=p.initialState,$=(0,x.useModel)("api"),P=$.fetchRunScript,l=$.fetchSave,S=g(u).index,b=(0,ir.c)(function(){return{type:"grid",item:{id:u,originalIndex:S},collect:function(v){var H=v.getSourceClientOffset(),q={x:0,y:0};return H&&(q.x=H.x,q.y=H.y),{offset:q,isDragging:v.isDragging()}},end:function(v,H){var q=v.id,Rr=v.originalIndex,Hr=H.didDrop();Hr||d(q,Rr);var Xr=h==null?void 0:h.map(function(Wr){return Wr==null?void 0:Wr.id}),Jr=f==null?void 0:f.boxdata.usercfgs;l.run({key:rr.Z.userCfgs,val:JSON.stringify(y()(y()({},Jr),{},{favapps:Xr}))})}}},[u,S,d]),V=Z()(b,2),sr=V[0],br=sr.isDragging,F=sr.offset,yr=V[1],Zr=(0,R.L)(function(){return{accept:"grid",hover:function(v){var H=v.id;if(H!==u){var q=g(u),Rr=q.index;d(H,Rr)}}}},[g,d]),Pr=Z()(Zr,2),Sr=Pr[1],Lr=br?0:1;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(or,{item:!0,xs:3,md:2,style:{opacity:Lr,transform:"translate(0,0)"},children:(0,m.jsx)(Ar,{ref:function(v){return yr(Sr(v))},onClick:function(){var v="".concat(t==null?void 0:t.id,"/").concat(t==null?void 0:t.author);U[v]===void 0&&(U[v]=0),U[v]+=1,Nr[v]=setTimeout(function(){if(Nr[v]!==void 0&&clearTimeout(Nr[v]),console.log(U[v]),U[v]===2){if(U[v]=0,!s)return x.history.push("/app/".concat(v));P.run({url:s,isRemote:!0})}else U[v]===1&&x.history.push("/app/".concat(v));U={}},200)},children:(0,m.jsxs)(hr.Z,{spacing:1,justifyContent:"center",alignItems:"center",children:[(0,m.jsxs)(L.Z,{sx:{width:50,height:50,borderRadius:2,overflow:"hidden",position:"relative",boxShadow:function(v){return v.shadows[4]}},children:[(0,m.jsx)(xr.Z,{variant:"square",alt:t==null?void 0:t.name,src:t==null?void 0:t.icon,sx:{width:"100%",height:"100%"}}),((a=P.fetches["".concat(s)])===null||a===void 0?void 0:a.loading)&&(0,m.jsx)(w.Z,{sx:{position:"absolute",bottom:0,width:"100%"}})]}),(0,m.jsx)(er.Z,{variant:"body2",sx:{fontSize:10,color:f!=null&&f.boxdata.usercfgs.bgimg?"#fff":"unset",width:"100%",fontWeight:"bold",textShadow:f!=null&&f.boxdata.usercfgs.bgimg?"black 0.1em 0.1em 0.2em":"unset"},noWrap:!0,children:t==null?void 0:t.name})]})})},"".concat(t==null?void 0:t.id,"/").concat(t==null?void 0:t.author,"/").concat(t==null?void 0:t.name)),br&&(f==null?void 0:f.isMobile)&&(0,m.jsx)(hr.Z,{sx:{zIndex:-1,opacity:.5,position:"fixed",left:F==null?void 0:F.x,top:F==null?void 0:F.y},spacing:1,justifyContent:"center",alignItems:"center",children:(0,m.jsx)(L.Z,{sx:{width:40,height:40,borderRadius:2,overflow:"hidden",position:"relative",boxShadow:function(v){return v.shadows[4]}},children:(0,m.jsx)(xr.Z,{variant:"square",alt:t==null?void 0:t.name,src:t==null?void 0:t.icon,sx:{width:"100%",height:"100%"}})})})]})},Ur=(0,j.memo)(Kr);function Vr(){var r,o=(0,x.useModel)("@@initialState"),a=o.initialState,t=(0,R.L)(function(){return{accept:"grid"}}),s=Z()(t,2),d=s[1],g=(a==null||(r=a.boxdata)===null||r===void 0?void 0:r.usercfgs.favapps.map(function(l){return a==null?void 0:a.apps.find(function(S){return S.id===l})}).filter(function(l){return!!l}))||[],h=(0,j.useState)(g),C=Z()(h,2),u=C[0],p=C[1],f=(0,j.useCallback)(function(l){var S=u.filter(function(b){return"".concat(b==null?void 0:b.id,"_").concat(b==null?void 0:b.author)===l})[0];return{card:S,index:u.indexOf(S)}},[u]),$=(0,j.useCallback)(function(l,S){var b=f(l),V=b.card,sr=b.index;p(ar()(u,{$splice:[[sr,1],[S,0,V]]}))},[f,u,p]),P=a==null?void 0:a.ui(a.boxdata);return(0,m.jsx)(or,{ref:d,container:!0,spacing:4,children:u==null?void 0:u.map(function(l,S){P==null||P.loadAppBaseInfo(l);var b=null;return l!=null&&l.script?b=l==null?void 0:l.script:l!=null&&l.scripts&&l!==null&&l!==void 0&&l.scripts[0].script&&(b=l==null?void 0:l.scripts[0].script),(0,m.jsx)(Ur,{item:l,data:u,script:b,findCard:f,moveCard:$,index:S},"".concat(l==null?void 0:l.id,"-").concat(l==null?void 0:l.author))})})}function Fr(){var r=(0,x.useModel)("@@initialState"),o=r.initialState;return(0,m.jsx)(L.Z,{pt:4,component:"div",children:(0,m.jsx)(Gr.W,{backend:o!=null&&o.isMobile?Or.zr:zr.PD,children:(0,m.jsx)(Vr,{})})})}}}]);
